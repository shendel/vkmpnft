(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{17537:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(39533)}])},66124:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(85893),s=n(67294),i=n(83300),r=n.n(i),o=function(e){return e.startsWith("ipfs://")?"".concat("https://skywalker.infura-ipfs.io/ipfs/").concat(e.substring(7)):e};function c(e){var t=e.url,n=(0,s.useState)(!1),i=n[0],c=n[1],u=(0,s.useState)(!0),l=u[0],p=u[1],d=(0,s.useState)(!1),m=d[0],y=d[1],f=(0,s.useState)(!1),g=(f[0],f[1]),h=(0,s.useState)({}),b=h[0],T=h[1];return(0,s.useState)((function(){t&&r()(o(t)).then((function(e){return e.headers.get("content-type").startsWith("image/")?"IMAGE":e.text()})).then((function(e){if("IMAGE"==e)return"IMAGE";try{return JSON.parse(e.slice(1))}catch(t){try{return JSON.parse(e)}catch(n){return"FAIL_PARSE"}}})).then((function(e){c(!0),p(!1),"FAIL_PARSE"!==e&&"IMAGE"!==e?T(e):"IMAGE"===e?y(!0):g(!0)})).catch((function(e){console.log("fail fetch",e)}))}),[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:l?(0,a.jsx)("div",{children:"Fetching"}):(0,a.jsx)(a.Fragment,{children:i&&(0,a.jsxs)(a.Fragment,{children:[b&&b.image&&(0,a.jsx)("img",{src:o(b.image)}),m&&(0,a.jsx)("img",{src:o(t)}),b&&b.name&&(0,a.jsx)("strong",{children:b.name})]})})})})}},67333:function(e,t,n){"use strict";var a=n(85893),s=n(11163),i=n(214),r=n.n(i),o=n(36485);t.Z=function(e){(0,s.useRouter)();var t=e.getDesign,n=e.getText;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"".concat(r().mainLogo," logoAddParams"),children:(0,a.jsx)("a",{href:(0,o.Rg)("index"),children:(0,a.jsx)("img",{src:t("logoUri","uri",(0,o.Vh)("images/logo.png","mainLogo")),alt:n("Stake NFT - earn ERC20","MainPage_Header")})})})})}},77695:function(e,t,n){"use strict";var a=n(85893),s=n(214),i=n.n(s),r=n(27129),o=n(44423),c=n(73848),u=n(49738),l=n(66124);t.Z=function(e){var t=e.tokenId,n=e.tokenUri,s=e.isApproved,p=e.onDeStake,d=e.onStake,m=e.isFetchUri,y=e.deStakeId,f=e.stakeId,g=e.isStaking,h=e.isDeStaking,b=e.isApproveDo,T=e.isApproveId,v=e.isMinted,x=e.farmStatus,k=e.tokenUtx,w=e.openConfirmWindow,M=!1;x&&x.version>=3&&x.lockEnabled&&(0,c.K)()<Number(k)+Number(x.lockTime)&&(M=!0);return(0,a.jsxs)("div",{className:"".concat(i().nftBox," nftTokenBox"),children:[!1!==n&&(0,r.Z)(n)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),(0,a.jsx)(l.Z,{url:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),m&&(0,a.jsx)("h2",{children:"Fetch info"})]}),v?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("a",{className:"".concat(i().mainButton," ").concat(i().spacerBottom," primaryButton"),href:(0,o.R)("stake"),children:"Go to staking"})}):(0,a.jsxs)(a.Fragment,{children:[null!==p&&(0,a.jsx)(a.Fragment,{children:M?(0,a.jsx)("button",{onClick:function(){var e=Number(k)+Number(x.lockTime)-(0,c.K)();w({title:"NFT token is locked",message:"This token is currently locked. You can withdraw him out of the farm in ".concat((0,u.R)(e)),isOk:!0})},className:"".concat(i().mainButton," ").concat(i().spacerBottom," primaryButton"),children:"Locked"}):(0,a.jsx)("button",{disabled:h||g||b,className:"".concat(i().mainButton," ").concat(i().spacerBottom," primaryButton"),onClick:p,children:h&&y===t?(0,a.jsx)(a.Fragment,{children:"De-staking..."}):(0,a.jsx)(a.Fragment,{children:"De-stake"})})}),null!==d&&(0,a.jsx)("button",{className:"".concat(i().mainButton," ").concat(i().spacerBottom," primaryButton"),onClick:d,disabled:h||g||b,children:g&&f===t?(0,a.jsx)(a.Fragment,{children:"Staking..."}):(0,a.jsx)(a.Fragment,{children:b&&T===t?(0,a.jsx)(a.Fragment,{children:"Approving..."}):(0,a.jsx)(a.Fragment,{children:s?"Stake":"Approve & Stake"})})})]})]},t.toString())}},49738:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var a=function(e){var t=Number(e),n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.floor(t%3600%60);return(n>0?n+(1==n?" hour ":" hours "):"")+(a>0?a+(1==a?" minute ":" minutes "):"")+(s>0?s+(1==s?" second":" seconds"):"")}},27129:function(e,t){"use strict";t.Z=function(e){return""!==e}},39533:function(e,t,n){"use strict";n.r(t);var a=n(47568),s=n(26042),i=n(69396),r=n(34051),o=n.n(r),c=n(85893),u=n(67294),l=n(214),p=n.n(l),d=n(78967),m=n(53419),y=n(15200),f=n(67333),g=n(36485),h=n(76969),b=n(61936),T=n(42474),v=n.n(T),x=n(77695),k=n(40589),w=n(19515),M=n(64262),N=n(5329);t.default=function(e){var t=e.storageData,n=(e.isOwner,e.addNotify),r=e.getText,l=e.getDesign,T=(e.storageMenu,["https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/apple.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/bar.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/bell.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/cherry.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/lemon.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/orange.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/plum.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/seven.png","https://github.com/shendel/crypto-casino/raw/master/public/images/games/slots/symbols/water-melon.png"]),F=(0,u.useState)(null===t||void 0===t?void 0:t.chainId),j=F[0],S=F[1],I=(0,u.useState)(null===t||void 0===t?void 0:t.nftCollection),A=I[0],C=I[1],P=(0,u.useState)({}),_=P[0],B=P[1],E=(0,u.useState)(!1),R=E[0],O=E[1],Z=(0,u.useState)(!1),D=Z[0],U=Z[1],W=(0,u.useState)(!1),L=W[0],G=W[1],J=(0,u.useState)(!1),H=J[0],V=J[1],X=(0,u.useState)(!1),Y=X[0],q=X[1],K=(0,u.useState)(!1),z=K[0],Q=K[1],$=(0,u.useState)(!1),ee=$[0],te=$[1],ne=(0,u.useState)(!1),ae=ne[0],se=ne[1],ie=(0,u.useState)(!1),re=ie[0],oe=ie[1],ce=(0,u.useState)({}),ue=ce[0],le=ce[1],pe=function(e,t){var n=!1;try{n=e.message.replace("Internal JSON-RPC error.",""),n=JSON.parse(n)}catch(a){}switch(n&&n.message?n.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}},de=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L||"".concat(D)!="".concat(j)){e.next=4;break}L.eth.getAccounts().then((function(e){V(e[0]);var t=new L.eth.Contract(w,A);q(t);var n=new L.eth.Contract(k.Mt,A);Q(n),(0,h.Z)(A,j).then((function(e){console.log(">>> nft info fetched",e),B(e),O(!0)})).catch((function(e){console.log(">>> fail fetch nft info",e)}))})).catch((function(e){console.log(">>> initOnWeb3Ready",e),pe(e)})),e.next=8;break;case 4:return e.next=6,(0,d.IC)();case 6:e.sent&&me();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){t&&t.chainId&&t.nftCollection&&(S(t.chainId),C(t.nftCollection))}),[t]),(0,u.useEffect)((function(){var e;e="on useEffect activeWeb3 initOnWeb3Ready",console.log(e),j&&A&&de()}),[L,j,A]);var me=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.pE)({onBeforeConnect:function(){te(!0)},onSetActiveChain:U,onConnected:function(e,t){G(t),te(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),pe(e),te(!1)},needChainId:j});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H&&z&&(se(!0),n("Confirm transaction for mint NFT"),t=v().randomBytes(32).toString("hex"),console.log(_),(0,b.Z)({activeWeb3:L,contractAddress:A,method:"mintRandom",weiAmount:_.NFTStakeInfo.mintPrice,args:["0x".concat(t)],onTrx:function(e){console.log(">> onTrx",e),n("NFT mint TX ".concat(e),"success")},onSuccess:function(e){console.log(">> onSuccess",e),n("NFT mint transaction broadcasted","success")},onError:function(e){console.log(">> onError",e),n("Fail mint NFT. ".concat(e.message?e.message:""),"error")},onFinally:function(e){var t,a,s,i,r,o;if(console.log(">> onFinally",e),(null===e||void 0===e||null===(t=e.events)||void 0===t||null===(a=t.Mint)||void 0===a||null===(s=a.returnValues)||void 0===s?void 0:s.tokenUri)&&(null===e||void 0===e||null===(i=e.events)||void 0===i||null===(r=i.Mint)||void 0===r||null===(o=r.returnValues)||void 0===o?void 0:o.tokenId)){var c=e.events.Mint.returnValues,u=c.tokenId,l=c.tokenUri;le({tokenId:u,tokenUri:l}),n("NFT #".concat(u," minted!"),"success")}se(!1),oe(!0)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,a.Z)(o().mark((function e(){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H||!Y){e.next=15;break}return se(!0),n("Confirm transaction for mint demo NFT"),e.prev=3,t=T[Math.floor(Math.random()*T.length)],e.next=7,(0,m.A)(H,Y,"claimNFT",[t]);case 7:a=e.sent,Y.methods.claimNFT(t).send(a).then((function(){oe(!0),se(!1),n("Demo NFT minted! Now you can test stake farm.","success")})).catch((function(e){n("Mint demo NFT transaction failed","error"),se(!1)})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),n("Mint demo NFT transaction failed","error"),se(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),ge=(0,M.T_)(j);return(0,c.jsxs)("div",{className:p().container,children:[(0,y.Z)("mint"),(0,f.Z)({getText:r,getDesign:l}),(0,c.jsx)("h1",{className:"".concat(p().h1," pageTitle"),children:r("MintPage_Title","Mint Demo NFTs for test")}),(0,c.jsx)("hr",{className:"".concat(p().divider," ").concat(p().spacerTop)}),H?(0,c.jsx)(c.Fragment,{children:R?(0,c.jsx)(c.Fragment,{children:_.isNFTStakeToken?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"mintPageSubTitle",children:r("MintPage_Managed_Title","Mint NFT")}),(0,c.jsx)("div",{className:"mintPageTextBeforePrice",children:r("MintPage_TextBeforePrice")}),(0,c.jsx)("div",{className:"".concat(p().mintPageDesc," mintPagePrice"),children:r("MintPage_Managed_PriceInfo","Mint price is %amount% %currency%",{amount:(0,N.m)(_.NFTStakeInfo.mintPrice,ge.nativeCurrency.decimals),currency:ge.nativeCurrency.symbol})}),(0,c.jsx)("div",{className:"mintPageTextAfterPrice",children:r("MintPage_TextAfterPrice")}),(0,c.jsx)("div",{className:p().mintPageMintedHolder,children:(0,c.jsx)("button",{disabled:ae,className:"".concat(p().mainButton," primaryButton"),onClick:ye,children:ae?"Minting NFT...":re?"Mint some one":"Mint NFT"})}),ue&&ue.tokenId&&ue.tokenUri&&(0,c.jsx)(c.Fragment,{children:(0,x.Z)((0,i.Z)((0,s.Z)({},ue),{isMinted:!0}))})]}):(0,c.jsx)(c.Fragment,{children:re?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{children:"Demo NFT minted"}),(0,c.jsx)("a",{href:(0,g.Rg)("stake"),className:"".concat(p().mainButton," primaryButton"),children:"Go to Stake NFT"})]}):(0,c.jsx)("button",{disabled:ae,className:"".concat(p().mainButton," primaryButton"),onClick:fe,children:ae?"Minting NFT...":"Mint NFT"})})}):(0,c.jsx)("div",{children:r("MinPage_Loading","Loading...")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mintBeforeConnectWallet",children:r("StakePage_BeforeConnect_Text")}),(0,c.jsx)("button",{disabled:ee,className:"".concat(p().mainButton," primaryButton"),onClick:me,children:ee?"Connecting":"Connect Wallet"}),(0,c.jsx)("div",{className:"mintAfterConnectWallet",children:r("StakePage_AfterConnect_Text")})]})]})}},83300:function(e,t){"use strict";var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},19515:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"tokenURI","type":"string"}],"name":"claimNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}},function(e){e.O(0,[497,203,774,888,179],(function(){return t=17537,e(e.s=t);var t}));var t=e.O();_N_E=t}]);